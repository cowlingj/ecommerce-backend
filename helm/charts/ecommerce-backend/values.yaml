all: &all
  env: production
  enabled: true
  peerDependenciesHandled: true

elasticsearch:
  enabled: false
  peerDependenciesHandled: true

auth:
  enabled: false
  peerDependenciesHandled: true
  # <<: *all
  fusionauth:
    app:
      version: latest
    search:
      servers: http://elasticsearch-0.elasticsearch.svc.cluster.local:9200
  init:
    image: gcr.io/gke-test-253221/init.auth.admin
    version: 0.0.1

mongodb-config:
  <<: *all
  name: &mongodb-config-name mongodb-config
  group: data
  version: "0.0.1"
  rootPassword: null # generate random password

mongodb:
  image:
    tag: 4.2.0
  service:
    name: mongodb
    port: 8080
  existingSecret: *mongodb-config-name
  fullnameOverride: mongodb
  resources:
    limits:
      cpu: 100m
      memory: 512Mi
    requests:
      cpu: 50m
      memory: 256Mi
  persistence:
    size: 128Mi
  podLabels:
    group: data

postgres:
  # <<: *all
  enabled: false
  peerDependenciesHandled: true

cms:
  <<: *all
  name: cms
  group: frontend
  image: "gcr.io/gke-test-253221/cms.admin"
  imagePullSecret: gcr
  version: "0.0.2"
  cookieSecret: null
  mongodb:
    host: null
    port: 8080
    cms:
      username: cms
      database: cms
      secretName: cms-mongodb
      existingSecret: false
      password: null
    admin:
      username: root
      database: admin
      secretName: *mongodb-config-name
      password: null
  users:
    secretName: cms-users
    existingSecret: false
    data:
      users:
        - username: admin
          password: password
          isAdmin: true
  ports:
    ui:
      port: 80
      protocol: http
      name: ui
    api:
      port: 8080
      protocol: http
      name: api
  init:
    mongodb:
      image: "gcr.io/gke-test-253221/init.cms.admin"
      version: "0.0.1"

izettle-products:
  <<: *all
  name: izettle-products
  group: backend
  version: "0.0.1"
  image: gcr.io/gke-test-253221/izettle-products.backend
  imagePullSecret: gcr
  serviceName: products
  existingCredentialsSecret: false
  credentialsSecretName: izettle-credentials-secret
  izettleCredentials:
    username: null
    password: null
    client_id: null
    client_secret: null
  izettleEndpoints:
    auth: https://oauth.izettle.com
    products: https://products.izettle.com
  ports:
    main:
      name: main
      port: 80
      protocol: http
