{{- if not .Values.authAdmin.secrets.clientSecret.exists }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "keystone-cms.scopedName" (list .Values.authAdmin.secrets.clientSecret .) }}
  labels:
{{ include "keystone-cms.labels" . | indent 4 }}
type: Opaque
data: {{ .Values.authAdmin.secrets.clientSecret.data | toJson | b64enc }}
{{- end }}
---
{{- if not .Values.authAdmin.secrets.encryptionKey.exists }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "keystone-cms.scopedName" (list .Values.authAdmin.secrets.encryptionKey .) }}
  labels:
{{ include "keystone-cms.labels" . | indent 4 }}
type: Opaque
data: {{ (.Values.authAdmin.secrets.encryptionKey.data (randAscii 32)) | trunc 32 | b64enc }}
{{- end }}
---
{{- if not .Values.authApi.secrets.clientSecret.exists }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "keystone-cms.scopedName" (list .Values.authApi.secrets.clientSecret .) }}
  labels:
{{ include "keystone-cms.labels" . | indent 4 }}
type: Opaque
data: {{ .Values.authApi.secrets.clientSecret.data | b64enc }}
{{- end }}
---
{{- if not .Values.authApi.secrets.encryptionKey.exists }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "keystone-cms.scopedName" (list .Values.authApi.secrets.encryptionKey .) }}
  labels:
{{ include "keystone-cms.labels" . | indent 4 }}
type: Opaque
data: {{ (.Values.authApi.secrets.encryptionKey.data (randAscii 32)) | trunc 32 | b64enc }}
{{- end }}
